IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191106113816_AppSettingsInConfigDatabase')
BEGIN
    DROP TABLE [AppSettings];
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191106113816_AppSettingsInConfigDatabase')
BEGIN
    DROP INDEX [UserNameIndex] ON [AspNetUsers];
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191106113816_AppSettingsInConfigDatabase')
BEGIN
    DROP INDEX [RoleNameIndex] ON [AspNetRoles];
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191106113816_AppSettingsInConfigDatabase')
BEGIN
    DECLARE @var0 sysname;
    SELECT @var0 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[StormyProduct]') AND [c].[name] = N'Width');
    IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [StormyProduct] DROP CONSTRAINT [' + @var0 + '];');
    ALTER TABLE [StormyProduct] ALTER COLUMN [Width] float NOT NULL;
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191106113816_AppSettingsInConfigDatabase')
BEGIN
    DECLARE @var1 sysname;
    SELECT @var1 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[StormyProduct]') AND [c].[name] = N'Length');
    IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [StormyProduct] DROP CONSTRAINT [' + @var1 + '];');
    ALTER TABLE [StormyProduct] ALTER COLUMN [Length] float NOT NULL;
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191106113816_AppSettingsInConfigDatabase')
BEGIN
    DECLARE @var2 sysname;
    SELECT @var2 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[StormyProduct]') AND [c].[name] = N'Height');
    IF @var2 IS NOT NULL EXEC(N'ALTER TABLE [StormyProduct] DROP CONSTRAINT [' + @var2 + '];');
    ALTER TABLE [StormyProduct] ALTER COLUMN [Height] float NOT NULL;
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191106113816_AppSettingsInConfigDatabase')
BEGIN
    DECLARE @var3 sysname;
    SELECT @var3 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[StormyProduct]') AND [c].[name] = N'Diameter');
    IF @var3 IS NOT NULL EXEC(N'ALTER TABLE [StormyProduct] DROP CONSTRAINT [' + @var3 + '];');
    ALTER TABLE [StormyProduct] ALTER COLUMN [Diameter] float NULL;
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191106113816_AppSettingsInConfigDatabase')
BEGIN
    DECLARE @var4 sysname;
    SELECT @var4 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Shipment]') AND [c].[name] = N'TotalWidth');
    IF @var4 IS NOT NULL EXEC(N'ALTER TABLE [Shipment] DROP CONSTRAINT [' + @var4 + '];');
    ALTER TABLE [Shipment] ALTER COLUMN [TotalWidth] float NOT NULL;
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191106113816_AppSettingsInConfigDatabase')
BEGIN
    DECLARE @var5 sysname;
    SELECT @var5 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Shipment]') AND [c].[name] = N'TotalWeight');
    IF @var5 IS NOT NULL EXEC(N'ALTER TABLE [Shipment] DROP CONSTRAINT [' + @var5 + '];');
    ALTER TABLE [Shipment] ALTER COLUMN [TotalWeight] float NOT NULL;
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191106113816_AppSettingsInConfigDatabase')
BEGIN
    DECLARE @var6 sysname;
    SELECT @var6 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Shipment]') AND [c].[name] = N'TotalLength');
    IF @var6 IS NOT NULL EXEC(N'ALTER TABLE [Shipment] DROP CONSTRAINT [' + @var6 + '];');
    ALTER TABLE [Shipment] ALTER COLUMN [TotalLength] float NOT NULL;
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191106113816_AppSettingsInConfigDatabase')
BEGIN
    DECLARE @var7 sysname;
    SELECT @var7 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Shipment]') AND [c].[name] = N'TotalHeight');
    IF @var7 IS NOT NULL EXEC(N'ALTER TABLE [Shipment] DROP CONSTRAINT [' + @var7 + '];');
    ALTER TABLE [Shipment] ALTER COLUMN [TotalHeight] float NOT NULL;
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191106113816_AppSettingsInConfigDatabase')
BEGIN
    DECLARE @var8 sysname;
    SELECT @var8 = [d].[name]
    FROM [sys].[default_constraints] [d]
    INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
    WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Shipment]') AND [c].[name] = N'TotalArea');
    IF @var8 IS NOT NULL EXEC(N'ALTER TABLE [Shipment] DROP CONSTRAINT [' + @var8 + '];');
    ALTER TABLE [Shipment] ALTER COLUMN [TotalArea] float NOT NULL;
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191106113816_AppSettingsInConfigDatabase')
BEGIN
    ALTER TABLE [Shipment] ADD [CubeRoot] float NOT NULL DEFAULT 0.0E0;
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191106113816_AppSettingsInConfigDatabase')
BEGIN
    CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191106113816_AppSettingsInConfigDatabase')
BEGIN
    CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191106113816_AppSettingsInConfigDatabase')
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20191106113816_AppSettingsInConfigDatabase', N'2.2.6-servicing-10079');
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [AppSettings] (
        [Id] nvarchar(450) NOT NULL,
        [Value] nvarchar(450) NULL,
        [Module] nvarchar(450) NULL,
        [IsVisibleInCommonSettingPage] bit NOT NULL,
        CONSTRAINT [PK_AppSettings] PRIMARY KEY ([Id])
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [AspNetRoles] (
        [Id] nvarchar(450) NOT NULL,
        [Name] nvarchar(256) NULL,
        [NormalizedName] nvarchar(256) NULL,
        [ConcurrencyStamp] nvarchar(max) NULL,
        CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [AspNetUsers] (
        [Id] nvarchar(450) NOT NULL,
        [UserName] nvarchar(256) NULL,
        [NormalizedUserName] nvarchar(256) NULL,
        [Email] nvarchar(256) NULL,
        [NormalizedEmail] nvarchar(256) NULL,
        [EmailConfirmed] bit NOT NULL,
        [PasswordHash] nvarchar(max) NULL,
        [SecurityStamp] nvarchar(max) NULL,
        [ConcurrencyStamp] nvarchar(max) NULL,
        [PhoneNumber] nvarchar(max) NULL,
        [PhoneNumberConfirmed] bit NOT NULL,
        [TwoFactorEnabled] bit NOT NULL,
        [LockoutEnd] datetimeoffset NULL,
        [LockoutEnabled] bit NOT NULL,
        [AccessFailedCount] int NOT NULL,
        CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [Brand] (
        [Id] bigint NOT NULL IDENTITY,
        [LastModified] datetimeoffset NOT NULL,
        [IsDeleted] bit NOT NULL,
        [Name] nvarchar(max) NULL,
        [Slug] nvarchar(450) NOT NULL,
        [Description] nvarchar(max) NULL,
        [Website] nvarchar(max) NULL,
        [LogoImage] nvarchar(max) NULL,
        CONSTRAINT [PK_Brand] PRIMARY KEY ([Id])
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [Category] (
        [Id] bigint NOT NULL IDENTITY,
        [LastModified] datetimeoffset NOT NULL,
        [IsDeleted] bit NOT NULL,
        [Name] nvarchar(450) NOT NULL,
        [Slug] nvarchar(450) NOT NULL,
        [Description] nvarchar(450) NOT NULL,
        [DisplayOrder] int NOT NULL,
        [IsPublished] bit NOT NULL,
        [IncludeInMenu] bit NOT NULL,
        [ParentId] bigint NULL,
        [ChildrenId] bigint NULL,
        [ThumbnailImageUrl] nvarchar(max) NULL,
        CONSTRAINT [PK_Category] PRIMARY KEY ([Id])
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [EntityType] (
        [Id] nvarchar(450) NOT NULL,
        [IsMenuable] bit NOT NULL,
        [AreaName] nvarchar(450) NULL,
        [RoutingController] nvarchar(450) NULL,
        [RoutingAction] nvarchar(450) NULL,
        [IsDeleted] bit NOT NULL,
        CONSTRAINT [PK_EntityType] PRIMARY KEY ([Id])
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [Media] (
        [Id] bigint NOT NULL IDENTITY,
        [LastModified] datetimeoffset NOT NULL,
        [IsDeleted] bit NOT NULL,
        [Caption] nvarchar(max) NULL,
        [FileSize] bigint NOT NULL,
        [FileName] nvarchar(max) NULL,
        [MediaType] int NOT NULL,
        [SeoFileName] nvarchar(max) NULL,
        CONSTRAINT [PK_Media] PRIMARY KEY ([Id])
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [ProductAttributeGroup] (
        [Id] bigint NOT NULL IDENTITY,
        [LastModified] datetimeoffset NOT NULL,
        [IsDeleted] bit NOT NULL,
        [Name] nvarchar(450) NOT NULL,
        CONSTRAINT [PK_ProductAttributeGroup] PRIMARY KEY ([Id])
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [ProductOption] (
        [Id] bigint NOT NULL IDENTITY,
        [LastModified] datetimeoffset NOT NULL,
        [IsDeleted] bit NOT NULL,
        [Name] nvarchar(450) NOT NULL,
        CONSTRAINT [PK_ProductOption] PRIMARY KEY ([Id])
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [Stock] (
        [Id] bigint NOT NULL IDENTITY,
        [LastModified] datetimeoffset NOT NULL,
        [IsDeleted] bit NOT NULL,
        CONSTRAINT [PK_Stock] PRIMARY KEY ([Id])
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [VendorAddress] (
        [Id] bigint NOT NULL IDENTITY,
        [Address_Street] nvarchar(max) NULL,
        [Address_FirstAddress] nvarchar(max) NULL,
        [Address_SecondAddress] nvarchar(max) NULL,
        [Address_City] nvarchar(max) NULL,
        [Address_District] nvarchar(max) NULL,
        [Address_State] nvarchar(max) NULL,
        [Address_PostalCode] nvarchar(max) NULL,
        [Address_Number] nvarchar(max) NULL,
        [Address_Complement] nvarchar(max) NULL,
        [Address_Country] nvarchar(max) NULL,
        [WhoReceives] nvarchar(max) NULL,
        [PhoneNumber] nvarchar(max) NULL,
        CONSTRAINT [PK_VendorAddress] PRIMARY KEY ([Id])
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [Wishlist] (
        [Id] bigint NOT NULL IDENTITY,
        [LastModified] datetimeoffset NOT NULL,
        [IsDeleted] bit NOT NULL,
        [StormyCustomerId] nvarchar(max) NULL,
        CONSTRAINT [PK_Wishlist] PRIMARY KEY ([Id])
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [AspNetRoleClaims] (
        [Id] int NOT NULL IDENTITY,
        [RoleId] nvarchar(450) NOT NULL,
        [ClaimType] nvarchar(max) NULL,
        [ClaimValue] nvarchar(max) NULL,
        CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
        CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [AspNetUserClaims] (
        [Id] int NOT NULL IDENTITY,
        [UserId] nvarchar(450) NOT NULL,
        [ClaimType] nvarchar(max) NULL,
        [ClaimValue] nvarchar(max) NULL,
        CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
        CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [AspNetUserLogins] (
        [LoginProvider] nvarchar(450) NOT NULL,
        [ProviderKey] nvarchar(450) NOT NULL,
        [ProviderDisplayName] nvarchar(max) NULL,
        [UserId] nvarchar(450) NOT NULL,
        CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
        CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [AspNetUserRoles] (
        [UserId] nvarchar(450) NOT NULL,
        [RoleId] nvarchar(450) NOT NULL,
        CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
        CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
        CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [AspNetUserTokens] (
        [UserId] nvarchar(450) NOT NULL,
        [LoginProvider] nvarchar(450) NOT NULL,
        [Name] nvarchar(450) NOT NULL,
        [Value] nvarchar(max) NULL,
        CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
        CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [Entity] (
        [Id] bigint NOT NULL IDENTITY,
        [LastModified] datetimeoffset NOT NULL,
        [IsDeleted] bit NOT NULL,
        [Slug] nvarchar(450) NOT NULL,
        [Name] nvarchar(450) NOT NULL,
        [EntityId] bigint NOT NULL,
        [EntityTypeId] nvarchar(450) NOT NULL,
        CONSTRAINT [PK_Entity] PRIMARY KEY ([Id]),
        CONSTRAINT [FK_Entity_EntityType_EntityTypeId] FOREIGN KEY ([EntityTypeId]) REFERENCES [EntityType] ([Id]) ON DELETE CASCADE
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [ProductAttribute] (
        [Id] bigint NOT NULL IDENTITY,
        [LastModified] datetimeoffset NOT NULL,
        [IsDeleted] bit NOT NULL,
        [GroupId] bigint NOT NULL,
        [Name] nvarchar(max) NULL,
        CONSTRAINT [PK_ProductAttribute] PRIMARY KEY ([Id]),
        CONSTRAINT [FK_ProductAttribute_ProductAttributeGroup_GroupId] FOREIGN KEY ([GroupId]) REFERENCES [ProductAttributeGroup] ([Id]) ON DELETE CASCADE
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [StormyVendor] (
        [Id] bigint NOT NULL IDENTITY,
        [LastModified] datetimeoffset NOT NULL,
        [IsDeleted] bit NOT NULL,
        [CompanyName] nvarchar(max) NULL,
        [ContactTitle] nvarchar(max) NULL,
        [VendorAddressId] bigint NOT NULL,
        [ProductId] bigint NOT NULL,
        [Phone] nvarchar(max) NULL,
        [Email] nvarchar(max) NULL,
        [WebSite] nvarchar(max) NULL,
        [TypeGoods] nvarchar(max) NULL,
        [SizeUrl] nvarchar(max) NULL,
        [Logo] nvarchar(max) NULL,
        [Note] nvarchar(max) NULL,
        CONSTRAINT [PK_StormyVendor] PRIMARY KEY ([Id]),
        CONSTRAINT [FK_StormyVendor_VendorAddress_VendorAddressId] FOREIGN KEY ([VendorAddressId]) REFERENCES [VendorAddress] ([Id]) ON DELETE CASCADE
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [StormyProduct] (
        [Id] bigint NOT NULL IDENTITY,
        [LastModified] datetimeoffset NOT NULL,
        [IsDeleted] bit NOT NULL,
        [SKU] nvarchar(max) NOT NULL,
        [ProductName] nvarchar(400) NOT NULL,
        [Slug] nvarchar(max) NULL,
        [BrandId] bigint NOT NULL,
        [VendorId] bigint NOT NULL,
        [CategoryId] bigint NOT NULL,
        [MediaId] bigint NULL,
        [ProductLinksId] bigint NULL,
        [ShortDescription] nvarchar(max) NULL,
        [Description] nvarchar(max) NULL,
        [QuantityPerUnity] int NOT NULL,
        [AvailableSizes] nvarchar(max) NULL,
        [UnitPrice] decimal(18,2) NOT NULL,
        [Discount] decimal(18,2) NOT NULL,
        [UnitWeight] float NOT NULL,
        [Height] float NOT NULL,
        [Width] float NOT NULL,
        [Length] float NOT NULL,
        [Diameter] float NULL,
        [UnitsInStock] int NOT NULL,
        [UnitsOnOrder] int NOT NULL,
        [ThumbnailImage] nvarchar(max) NULL,
        [Note] nvarchar(max) NULL,
        [ProductCost] decimal(18,2) NOT NULL,
        [PublishedOn] datetime2 NULL,
        [CreatedOn] datetime2 NULL,
        [RatingAverage] int NOT NULL,
        [StockId] bigint NULL,
        CONSTRAINT [PK_StormyProduct] PRIMARY KEY ([Id]),
        CONSTRAINT [FK_StormyProduct_Brand_BrandId] FOREIGN KEY ([BrandId]) REFERENCES [Brand] ([Id]) ON DELETE CASCADE,
        CONSTRAINT [FK_StormyProduct_Stock_StockId] FOREIGN KEY ([StockId]) REFERENCES [Stock] ([Id]) ON DELETE NO ACTION,
        CONSTRAINT [FK_StormyProduct_StormyVendor_VendorId] FOREIGN KEY ([VendorId]) REFERENCES [StormyVendor] ([Id]) ON DELETE NO ACTION
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [ProductAttributeValue] (
        [Id] bigint NOT NULL IDENTITY,
        [LastModified] datetimeoffset NOT NULL,
        [IsDeleted] bit NOT NULL,
        [AttributeId] bigint NOT NULL,
        [ProductId] bigint NOT NULL,
        [Value] nvarchar(max) NULL,
        CONSTRAINT [PK_ProductAttributeValue] PRIMARY KEY ([Id]),
        CONSTRAINT [FK_ProductAttributeValue_ProductAttribute_AttributeId] FOREIGN KEY ([AttributeId]) REFERENCES [ProductAttribute] ([Id]) ON DELETE CASCADE,
        CONSTRAINT [FK_ProductAttributeValue_StormyProduct_ProductId] FOREIGN KEY ([ProductId]) REFERENCES [StormyProduct] ([Id]) ON DELETE CASCADE
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [ProductCategory] (
        [Id] bigint NOT NULL IDENTITY,
        [LastModified] datetimeoffset NOT NULL,
        [IsDeleted] bit NOT NULL,
        [DisplayOrder] int NOT NULL,
        [CategoryId] bigint NOT NULL,
        [ProductId] bigint NOT NULL,
        CONSTRAINT [PK_ProductCategory] PRIMARY KEY ([Id]),
        CONSTRAINT [FK_ProductCategory_Category_CategoryId] FOREIGN KEY ([CategoryId]) REFERENCES [Category] ([Id]) ON DELETE NO ACTION,
        CONSTRAINT [FK_ProductCategory_StormyProduct_ProductId] FOREIGN KEY ([ProductId]) REFERENCES [StormyProduct] ([Id]) ON DELETE NO ACTION
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [ProductLink] (
        [Id] bigint NOT NULL IDENTITY,
        [LastModified] datetimeoffset NOT NULL,
        [IsDeleted] bit NOT NULL,
        [ProductId] bigint NOT NULL,
        [LinkedProductId] bigint NOT NULL,
        [LinkType] int NOT NULL,
        CONSTRAINT [PK_ProductLink] PRIMARY KEY ([Id]),
        CONSTRAINT [FK_ProductLink_StormyProduct_LinkedProductId] FOREIGN KEY ([LinkedProductId]) REFERENCES [StormyProduct] ([Id]) ON DELETE CASCADE,
        CONSTRAINT [FK_ProductLink_StormyProduct_ProductId] FOREIGN KEY ([ProductId]) REFERENCES [StormyProduct] ([Id]) ON DELETE NO ACTION
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [ProductMedia] (
        [Id] bigint NOT NULL IDENTITY,
        [LastModified] datetimeoffset NOT NULL,
        [IsDeleted] bit NOT NULL,
        [MediaId] bigint NOT NULL,
        [StormyProductId] bigint NOT NULL,
        CONSTRAINT [PK_ProductMedia] PRIMARY KEY ([Id]),
        CONSTRAINT [FK_ProductMedia_Media_MediaId] FOREIGN KEY ([MediaId]) REFERENCES [Media] ([Id]) ON DELETE NO ACTION,
        CONSTRAINT [FK_ProductMedia_StormyProduct_StormyProductId] FOREIGN KEY ([StormyProductId]) REFERENCES [StormyProduct] ([Id]) ON DELETE NO ACTION
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [ProductOptionValue] (
        [Id] bigint NOT NULL IDENTITY,
        [LastModified] datetimeoffset NOT NULL,
        [IsDeleted] bit NOT NULL,
        [OptionId] bigint NOT NULL,
        [ProductId] bigint NOT NULL,
        [Value] nvarchar(450) NULL,
        [DisplayType] nvarchar(450) NULL,
        [SortIndex] int NOT NULL,
        CONSTRAINT [PK_ProductOptionValue] PRIMARY KEY ([Id]),
        CONSTRAINT [FK_ProductOptionValue_ProductOption_OptionId] FOREIGN KEY ([OptionId]) REFERENCES [ProductOption] ([Id]) ON DELETE CASCADE,
        CONSTRAINT [FK_ProductOptionValue_StormyProduct_ProductId] FOREIGN KEY ([ProductId]) REFERENCES [StormyProduct] ([Id]) ON DELETE CASCADE
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [ProductTemplate] (
        [Id] bigint NOT NULL IDENTITY,
        [LastModified] datetimeoffset NOT NULL,
        [IsDeleted] bit NOT NULL,
        [Name] nvarchar(max) NULL,
        [StormyProductId] bigint NOT NULL,
        CONSTRAINT [PK_ProductTemplate] PRIMARY KEY ([Id]),
        CONSTRAINT [FK_ProductTemplate_StormyProduct_StormyProductId] FOREIGN KEY ([StormyProductId]) REFERENCES [StormyProduct] ([Id]) ON DELETE CASCADE
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [WishlistItem] (
        [Id] bigint NOT NULL IDENTITY,
        [LastModified] datetimeoffset NOT NULL,
        [IsDeleted] bit NOT NULL,
        [ProductId] bigint NOT NULL,
        [WishlistId] bigint NOT NULL,
        [AddedAt] datetime2 NOT NULL,
        [WishlistId1] bigint NULL,
        CONSTRAINT [PK_WishlistItem] PRIMARY KEY ([Id]),
        CONSTRAINT [FK_WishlistItem_StormyProduct_ProductId] FOREIGN KEY ([ProductId]) REFERENCES [StormyProduct] ([Id]) ON DELETE NO ACTION,
        CONSTRAINT [FK_WishlistItem_Wishlist_WishlistId] FOREIGN KEY ([WishlistId]) REFERENCES [Wishlist] ([Id]) ON DELETE NO ACTION,
        CONSTRAINT [FK_WishlistItem_Wishlist_WishlistId1] FOREIGN KEY ([WishlistId1]) REFERENCES [Wishlist] ([Id]) ON DELETE NO ACTION
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [ProductTemplateProductAttribute] (
        [ProductTemplateId] bigint NOT NULL,
        [ProductAttributeId] bigint NOT NULL,
        CONSTRAINT [PK_ProductTemplateProductAttribute] PRIMARY KEY ([ProductTemplateId], [ProductAttributeId]),
        CONSTRAINT [FK_ProductTemplateProductAttribute_ProductAttribute_ProductAttributeId] FOREIGN KEY ([ProductAttributeId]) REFERENCES [ProductAttribute] ([Id]) ON DELETE CASCADE,
        CONSTRAINT [FK_ProductTemplateProductAttribute_ProductTemplate_ProductTemplateId] FOREIGN KEY ([ProductTemplateId]) REFERENCES [ProductTemplate] ([Id]) ON DELETE NO ACTION
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [Shipment] (
        [Id] bigint NOT NULL IDENTITY,
        [LastModified] datetimeoffset NOT NULL,
        [IsDeleted] bit NOT NULL,
        [StormyOrderId] bigint NOT NULL,
        [WhoReceives] nvarchar(max) NULL,
        [TrackNumber] nvarchar(250) NULL,
        [ShipmentMethod] nvarchar(max) NULL,
        [ShipmentServiceName] nvarchar(max) NULL,
        [ShipmentProvider] nvarchar(max) NULL,
        [TotalWeight] float NOT NULL,
        [TotalHeight] float NOT NULL,
        [TotalWidth] float NOT NULL,
        [TotalLength] float NOT NULL,
        [TotalArea] float NOT NULL,
        [CubeRoot] float NOT NULL,
        [SafeAmount] decimal(18,2) NOT NULL,
        [CreatedOn] datetime2 NOT NULL,
        [ShippedDate] datetime2 NULL,
        [DeliveryDate] datetime2 NULL,
        [ExpectedDeliveryDate] datetime2 NULL,
        [ExpectedHourOfDay] datetime2 NOT NULL,
        [Comment] nvarchar(max) NULL,
        [DeliveryCost] decimal(18,2) NOT NULL,
        [BillingAddressId] bigint NOT NULL,
        [DestinationAddressId] bigint NOT NULL,
        [Status] int NOT NULL,
        CONSTRAINT [PK_Shipment] PRIMARY KEY ([Id])
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [StormyCustomer] (
        [Id] nvarchar(450) NOT NULL,
        [UserName] nvarchar(max) NULL,
        [NormalizedUserName] nvarchar(max) NULL,
        [Email] nvarchar(max) NOT NULL,
        [NormalizedEmail] nvarchar(max) NULL,
        [EmailConfirmed] bit NOT NULL,
        [PasswordHash] nvarchar(max) NULL,
        [SecurityStamp] nvarchar(max) NULL,
        [ConcurrencyStamp] nvarchar(max) NULL,
        [PhoneNumber] nvarchar(max) NULL,
        [PhoneNumberConfirmed] bit NOT NULL,
        [TwoFactorEnabled] bit NOT NULL,
        [LockoutEnd] datetimeoffset NULL,
        [LockoutEnabled] bit NOT NULL,
        [AccessFailedCount] int NOT NULL,
        [CPF] nvarchar(9) NULL,
        [DefaultShippingAddressId] bigint NULL,
        [DefaultBillingAddressId] bigint NULL,
        [CustomerReviewsId] bigint NULL,
        [CustomerWishlistId] bigint NULL,
        [FullName] nvarchar(450) NULL,
        [RefreshTokenHash] nvarchar(max) NULL,
        [CreatedOn] datetimeoffset NOT NULL,
        CONSTRAINT [PK_StormyCustomer] PRIMARY KEY ([Id]),
        CONSTRAINT [FK_StormyCustomer_Wishlist_CustomerWishlistId] FOREIGN KEY ([CustomerWishlistId]) REFERENCES [Wishlist] ([Id]) ON DELETE NO ACTION
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [ApplicationRole] (
        [Id] nvarchar(450) NOT NULL,
        [Name] nvarchar(max) NULL,
        [NormalizedName] nvarchar(max) NULL,
        [ConcurrencyStamp] nvarchar(max) NULL,
        [StormyCustomerId] nvarchar(450) NULL,
        CONSTRAINT [PK_ApplicationRole] PRIMARY KEY ([Id]),
        CONSTRAINT [FK_ApplicationRole_StormyCustomer_StormyCustomerId] FOREIGN KEY ([StormyCustomerId]) REFERENCES [StormyCustomer] ([Id]) ON DELETE NO ACTION
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [CustomerAddress] (
        [Id] bigint NOT NULL IDENTITY,
        [Address_Street] nvarchar(max) NULL,
        [Address_FirstAddress] nvarchar(max) NULL,
        [Address_SecondAddress] nvarchar(max) NULL,
        [Address_City] nvarchar(max) NULL,
        [Address_District] nvarchar(max) NULL,
        [Address_State] nvarchar(max) NULL,
        [Address_PostalCode] nvarchar(max) NULL,
        [Address_Number] nvarchar(max) NULL,
        [Address_Complement] nvarchar(max) NULL,
        [Address_Country] nvarchar(max) NULL,
        [WhoReceives] nvarchar(max) NULL,
        [IsDeleted] bit NOT NULL,
        [UserId] nvarchar(max) NULL,
        [OwnerId] nvarchar(450) NULL,
        CONSTRAINT [PK_CustomerAddress] PRIMARY KEY ([Id]),
        CONSTRAINT [FK_CustomerAddress_StormyCustomer_OwnerId] FOREIGN KEY ([OwnerId]) REFERENCES [StormyCustomer] ([Id]) ON DELETE NO ACTION
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [Review] (
        [Id] bigint NOT NULL IDENTITY,
        [LastModified] datetimeoffset NOT NULL,
        [IsDeleted] bit NOT NULL,
        [StormyCustomerId] nvarchar(450) NOT NULL,
        [StormyProductId] bigint NOT NULL,
        [Title] nvarchar(max) NULL,
        [Comment] nvarchar(max) NULL,
        [ReviewerName] nvarchar(max) NULL,
        [RatingLevel] int NOT NULL,
        [Status] int NOT NULL,
        CONSTRAINT [PK_Review] PRIMARY KEY ([Id]),
        CONSTRAINT [FK_Review_StormyCustomer_StormyCustomerId] FOREIGN KEY ([StormyCustomerId]) REFERENCES [StormyCustomer] ([Id]) ON DELETE CASCADE,
        CONSTRAINT [FK_Review_StormyProduct_StormyProductId] FOREIGN KEY ([StormyProductId]) REFERENCES [StormyProduct] ([Id]) ON DELETE NO ACTION
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [StormyOrder] (
        [Id] bigint NOT NULL IDENTITY,
        [LastModified] datetimeoffset NOT NULL,
        [IsDeleted] bit NOT NULL,
        [OrderUniqueKey] uniqueidentifier NOT NULL,
        [StormyCustomerId] bigint NOT NULL,
        [UserId] nvarchar(max) NULL,
        [PaymentId] bigint NOT NULL,
        [ShipmentId] bigint NOT NULL,
        [PickUpInStore] bit NOT NULL,
        [IsCancelled] bit NOT NULL,
        [Note] nvarchar(1000) NULL,
        [Comment] nvarchar(max) NULL,
        [Discount] decimal(18,2) NOT NULL,
        [Tax] decimal(18,2) NOT NULL,
        [TotalPrice] decimal(18,2) NOT NULL,
        [CustomerId] nvarchar(450) NULL,
        [OrderDate] datetime2 NOT NULL,
        [RequiredDate] datetime2 NOT NULL,
        [PaymentDate] datetime2 NULL,
        [Status] int NOT NULL,
        [StockId] bigint NULL,
        CONSTRAINT [PK_StormyOrder] PRIMARY KEY ([Id]),
        CONSTRAINT [FK_StormyOrder_StormyCustomer_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [StormyCustomer] ([Id]) ON DELETE NO ACTION,
        CONSTRAINT [FK_StormyOrder_Stock_StockId] FOREIGN KEY ([StockId]) REFERENCES [Stock] ([Id]) ON DELETE NO ACTION
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [OrderItem] (
        [Id] bigint NOT NULL IDENTITY,
        [LastModified] datetimeoffset NOT NULL,
        [IsDeleted] bit NOT NULL,
        [Quantity] int NOT NULL,
        [Price] nvarchar(max) NULL,
        [StormyProductId] bigint NOT NULL,
        [StormyOrderId] bigint NOT NULL,
        [ShipmentId] bigint NOT NULL,
        CONSTRAINT [PK_OrderItem] PRIMARY KEY ([Id]),
        CONSTRAINT [FK_OrderItem_Shipment_ShipmentId] FOREIGN KEY ([ShipmentId]) REFERENCES [Shipment] ([Id]) ON DELETE CASCADE,
        CONSTRAINT [FK_OrderItem_StormyOrder_StormyOrderId] FOREIGN KEY ([StormyOrderId]) REFERENCES [StormyOrder] ([Id]) ON DELETE CASCADE,
        CONSTRAINT [FK_OrderItem_StormyProduct_StormyProductId] FOREIGN KEY ([StormyProductId]) REFERENCES [StormyProduct] ([Id]) ON DELETE CASCADE
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE TABLE [Payment] (
        [Id] bigint NOT NULL IDENTITY,
        [LastModified] datetimeoffset NOT NULL,
        [IsDeleted] bit NOT NULL,
        [StormyOrderId] bigint NOT NULL,
        [CreatedOn] datetimeoffset NOT NULL,
        [Amount] decimal(18,2) NOT NULL,
        [PaymentFee] decimal(18,2) NOT NULL,
        [PaymentMethod] nvarchar(max) NULL,
        [GatewayTransactionId] nvarchar(max) NULL,
        [PaymentStatus] int NOT NULL,
        [FailureMessage] nvarchar(max) NULL,
        CONSTRAINT [PK_Payment] PRIMARY KEY ([Id]),
        CONSTRAINT [FK_Payment_StormyOrder_StormyOrderId] FOREIGN KEY ([StormyOrderId]) REFERENCES [StormyOrder] ([Id]) ON DELETE CASCADE
    );
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE INDEX [IX_ApplicationRole_StormyCustomerId] ON [ApplicationRole] ([StormyCustomerId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE INDEX [IX_CustomerAddress_OwnerId] ON [CustomerAddress] ([OwnerId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE INDEX [IX_Entity_EntityTypeId] ON [Entity] ([EntityTypeId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE INDEX [IX_OrderItem_ShipmentId] ON [OrderItem] ([ShipmentId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE INDEX [IX_OrderItem_StormyOrderId] ON [OrderItem] ([StormyOrderId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE INDEX [IX_OrderItem_StormyProductId] ON [OrderItem] ([StormyProductId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE UNIQUE INDEX [IX_Payment_StormyOrderId] ON [Payment] ([StormyOrderId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE INDEX [IX_ProductAttribute_GroupId] ON [ProductAttribute] ([GroupId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE INDEX [IX_ProductAttributeValue_AttributeId] ON [ProductAttributeValue] ([AttributeId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE INDEX [IX_ProductAttributeValue_ProductId] ON [ProductAttributeValue] ([ProductId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE INDEX [IX_ProductCategory_CategoryId] ON [ProductCategory] ([CategoryId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE INDEX [IX_ProductCategory_ProductId] ON [ProductCategory] ([ProductId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE INDEX [IX_ProductLink_LinkedProductId] ON [ProductLink] ([LinkedProductId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE INDEX [IX_ProductLink_ProductId] ON [ProductLink] ([ProductId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE INDEX [IX_ProductMedia_MediaId] ON [ProductMedia] ([MediaId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE INDEX [IX_ProductMedia_StormyProductId] ON [ProductMedia] ([StormyProductId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE INDEX [IX_ProductOptionValue_OptionId] ON [ProductOptionValue] ([OptionId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE INDEX [IX_ProductOptionValue_ProductId] ON [ProductOptionValue] ([ProductId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE INDEX [IX_ProductTemplate_StormyProductId] ON [ProductTemplate] ([StormyProductId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE INDEX [IX_ProductTemplateProductAttribute_ProductAttributeId] ON [ProductTemplateProductAttribute] ([ProductAttributeId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE INDEX [IX_Review_StormyCustomerId] ON [Review] ([StormyCustomerId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE INDEX [IX_Review_StormyProductId] ON [Review] ([StormyProductId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE UNIQUE INDEX [IX_Shipment_BillingAddressId] ON [Shipment] ([BillingAddressId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE UNIQUE INDEX [IX_Shipment_DestinationAddressId] ON [Shipment] ([DestinationAddressId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE UNIQUE INDEX [IX_Shipment_StormyOrderId] ON [Shipment] ([StormyOrderId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE UNIQUE INDEX [IX_StormyCustomer_CustomerWishlistId] ON [StormyCustomer] ([CustomerWishlistId]) WHERE [CustomerWishlistId] IS NOT NULL;
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE INDEX [IX_StormyCustomer_DefaultBillingAddressId] ON [StormyCustomer] ([DefaultBillingAddressId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE INDEX [IX_StormyCustomer_DefaultShippingAddressId] ON [StormyCustomer] ([DefaultShippingAddressId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE INDEX [IX_StormyOrder_CustomerId] ON [StormyOrder] ([CustomerId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE INDEX [IX_StormyOrder_StockId] ON [StormyOrder] ([StockId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE INDEX [IX_StormyProduct_BrandId] ON [StormyProduct] ([BrandId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE INDEX [IX_StormyProduct_StockId] ON [StormyProduct] ([StockId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE INDEX [IX_StormyProduct_VendorId] ON [StormyProduct] ([VendorId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE UNIQUE INDEX [IX_StormyVendor_VendorAddressId] ON [StormyVendor] ([VendorAddressId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE INDEX [IX_WishlistItem_ProductId] ON [WishlistItem] ([ProductId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE INDEX [IX_WishlistItem_WishlistId] ON [WishlistItem] ([WishlistId]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    CREATE INDEX [IX_WishlistItem_WishlistId1] ON [WishlistItem] ([WishlistId1]);
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    ALTER TABLE [Shipment] ADD CONSTRAINT [FK_Shipment_StormyOrder_StormyOrderId] FOREIGN KEY ([StormyOrderId]) REFERENCES [StormyOrder] ([Id]) ON DELETE NO ACTION;
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    ALTER TABLE [Shipment] ADD CONSTRAINT [FK_Shipment_CustomerAddress_BillingAddressId] FOREIGN KEY ([BillingAddressId]) REFERENCES [CustomerAddress] ([Id]) ON DELETE NO ACTION;
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    ALTER TABLE [Shipment] ADD CONSTRAINT [FK_Shipment_CustomerAddress_DestinationAddressId] FOREIGN KEY ([DestinationAddressId]) REFERENCES [CustomerAddress] ([Id]) ON DELETE NO ACTION;
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    ALTER TABLE [StormyCustomer] ADD CONSTRAINT [FK_StormyCustomer_CustomerAddress_DefaultBillingAddressId] FOREIGN KEY ([DefaultBillingAddressId]) REFERENCES [CustomerAddress] ([Id]) ON DELETE NO ACTION;
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    ALTER TABLE [StormyCustomer] ADD CONSTRAINT [FK_StormyCustomer_CustomerAddress_DefaultShippingAddressId] FOREIGN KEY ([DefaultShippingAddressId]) REFERENCES [CustomerAddress] ([Id]) ON DELETE NO ACTION;
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191110230438_Initial')
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20191110230438_Initial', N'2.2.6-servicing-10079');
END;

GO

IF NOT EXISTS(SELECT * FROM [__EFMigrationsHistory] WHERE [MigrationId] = N'20191115184426_UpdateModel')
BEGIN
    INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
    VALUES (N'20191115184426_UpdateModel', N'2.2.6-servicing-10079');
END;

GO

